<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:cxfbc="http://servicemix.apache.org/cxfbc/1.0" xmlns:caxchange="http://nci.nih.gov/caXchange"
	xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"
	xmlns:http="http://cxf.apache.org/transports/http/configuration"
	xmlns:sec="http://cxf.apache.org/configuration/security" xmlns:xsi="http://http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://servicemix.apache.org/cxfbc/1.0 http://servicemix.apache.org/schema/servicemix-cxfbc-3.2.2.xsd
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://cxf.apache.org/transports/http-jetty/configuration http://cxf.apache.org/schemas/configuration/http-jetty.xsd
       http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd
       http://cxf.apache.org/configuration/security http://cxf.apache.org/schemas/configuration/security.xsd"
	xmlns:jaxws="http://cxf.apache.org/jaxws">
	
	<bean id="myPasswordCallback"
		class="gov.nih.nci.caxchange.servicemix.bean.util.ServerPasswordCallback" />

	<cxfbc:consumer wsdl="classpath:caXchangeRequest.wsdl"
		useJBIWrapper="false" targetService="caxchange:processRequestRoute"
		targetEndpoint="caxchange:processRequestRouteEndpoint" busCfg="caXchangeConf/security/cxf-config.xml">

		<cxfbc:inInterceptors>
			<bean class="org.apache.cxf.interceptor.LoggingInInterceptor" />
			<bean class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
				<constructor-arg>
					<map>
						<entry key="action" value="UsernameToken
			Timestamp Signature" />
						<entry key="passwordType" value="PasswordText" />
						<entry key="signaturePropFile" value="caXchangeConf/security/cxfCrypto.properties" />
						<entry key="passwordCallbackRef">
							<ref bean="myPasswordCallback" />
						</entry>
					</map>
				</constructor-arg>
			</bean>
		</cxfbc:inInterceptors>

	</cxfbc:consumer>	
</beans>

